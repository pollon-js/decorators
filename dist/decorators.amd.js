/* @pollon/decorators - v1.0.0
* https://github.com/pollon-js/decorators#readme
* 2020 Francesco Lasaracina. Licensed ISC */
define(["exports","@pollon/pollon","@pollon/message-broker"],(function(e,t,r){"use strict";function n(e,t,r,n,o,c,i){try{var a=e[c](i),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}var y=function(e,t,r,n){if(r||n)throw"[Pollon decorators: ".concat(e," decorator can only be applied to a class")},h=function(e){return e[0].toUpperCase()+e.slice(1)};e.Juice=function(e){return function(r,c,l){if(y(r,0,l),!e)throw"[Pollon decorators: Juice decorator need the path to be set properly";return function(r){a(y,r);var c,l,f=p(y);function y(){o(this,y);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return f.call.apply(f,[this].concat(t))}return i(y,[{key:"onApplyBindings",value:(c=regeneratorRuntime.mark((function r(){var n,o,c,i,a,l=arguments;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=t.Application.get(this.Module.appName),r.next=3,o.Templates.Juice.get(e);case 3:for(c=l.length,i=new Array(c),a=0;a<c;a++)i[a]=l[a];return r.abrupt("return",(n=s(u(y.prototype),"onApplyBindings",this)).call.apply(n,[this].concat(i)));case 5:case"end":return r.stop()}}),r,this)})),l=function(){var e=this,t=arguments;return new Promise((function(r,o){var i=c.apply(e,t);function a(e){n(i,r,o,a,u,"next",e)}function u(e){n(i,r,o,a,u,"throw",e)}a(void 0)}))},function(){return l.apply(this,arguments)})}]),y}(r)}},e.Service=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{property:null},c=n.property;return function(n,l,f){if(y("Service",0,l,f),!(e instanceof r.PropertyNeeder))throw"[Pollon decorators: Service decorator InvalidArgumentException. `service` class must be of type PropertyNeeder]";if(!c&&!e.name)throw"[Pollon decorators: Service decorator in a class wide scope should be a class or you should specify a name parameter";return e.name&&(c=h(e.name)),function(r){a(l,r);var n=p(l);function l(){o(this,l);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.call.apply(n,[this].concat(t))}return i(l,[{key:"init",value:function(){var r,n=new e(this.Module.appName),o=t.Application.get(this.Module.appName);o.Providers.add(n),this[c]=n;for(var i=arguments.length,a=new Array(i),f=0;f<i;f++)a[f]=arguments[f];(r=s(u(l.prototype),"init",this)).call.apply(r,[this].concat(a))}}]),l}(n)}},Object.defineProperty(e,"__esModule",{value:!0})}));
